{"ast":null,"code":"import _slicedToArray from\"/home/abbas/jsPractice/tasks/task-forks/github-forks-app/github-forks-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{fetchForks as _fetchForks}from'../actionCreators/forks';import{setRequestData as _setRequestData}from'../actionCreators/requestData';import{withRouter}from'react-router-dom';import{addFavorFork,removeFavorFork}from'../actionCreators/favoritForks';import Pagination from'../components/Pagination';import NotFoundPage from'./NotFoundPage';import Wrapper from'../components/Wrapper';import ForksList from'../components/ForksList';import Spinner from'../components/Spinner';import FavorModal from'../components/FavorModal';import OpenModalBtn from'../components/OpenModalBtn';var ResultsPage=function ResultsPage(_ref){var forks=_ref.forks,fetchStatus=_ref.fetchStatus,fetchForks=_ref.fetchForks,setRequestData=_ref.setRequestData,history=_ref.history,match=_ref.match,requestData=_ref.requestData,addFavor=_ref.addFavor,removeFavor=_ref.removeFavor,favorites=_ref.favorites;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),modalInputValue=_useState2[0],setModalInputValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modalInputShow=_useState4[0],setModalInputShow=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalInputInvalid=_useState6[0],setModalInputInvalid=_useState6[1];var _match$params=match.params,owner=_match$params.owner,repName=_match$params.repName,number=_match$params.number;var inputValidator=new RegExp(/^([a-z0-9]|[a-z0-9](-(?!-)|[a-z0-9]){0,37}[a-z0-9])\\/[a-z0-9-]{1,39}$/i);var changePage=function changePage(n){history.push(\"/search/\".concat(owner,\"/\").concat(repName,\"/\").concat(Number(number)+n));setRequestData(owner,repName,number+n);};var onModalInputChange=function onModalInputChange(e){var value=e.target.value;if(modalInputInvalid)setModalInputInvalid(!inputValidator.test(value));setModalInputValue(value);};var onAddFavorClick=function onAddFavorClick(value){if(!inputValidator.test(value)){setModalInputInvalid(true);return;};addFavor(value);setModalInputValue('');setModalInputShow(false);};var onRemoveFavorClick=function onRemoveFavorClick(value){if(!inputValidator.test(value)){setModalInputInvalid(true);return;};removeFavor(value);setModalInputValue('');setModalInputShow(false);};var onShowModalClick=function onShowModalClick(){setModalInputShow(!modalInputShow);};useEffect(function(){fetchForks(owner,repName,number);},[requestData]);useEffect(function(){var storingData=JSON.stringify(favorites);localStorage.setItem('favorites',storingData);},[favorites]);if(fetchStatus.error)return React.createElement(NotFoundPage,{value:\"\".concat(owner,\"/\").concat(repName)});return React.createElement(\"div\",null,modalInputShow?React.createElement(FavorModal,{inputValue:modalInputValue,onInputChange:onModalInputChange,invalidInput:modalInputInvalid,onAddClick:onAddFavorClick.bind(_this,modalInputValue),onRemoveClick:onRemoveFavorClick.bind(_this,modalInputValue),onBackClick:onShowModalClick}):React.createElement(React.Fragment,null),React.createElement(OpenModalBtn,{onBtnClick:onShowModalClick}),React.createElement(Wrapper,null,fetchStatus.loading?React.createElement(Spinner,null):React.createElement(ForksList,{forks:forks,favorites:favorites})),React.createElement(Pagination,{onNextClick:changePage.bind(_this,1),onPrevClick:changePage.bind(_this,-1),prevDisabled:Number(number)===1,nextDisabled:forks.length<10}));};var mapStateToProps=function mapStateToProps(_ref2){var requestData=_ref2.requestData,forks=_ref2.forks,favoriteForks=_ref2.favoriteForks,fetchStatus=_ref2.fetchStatus;return{requestData:requestData,forks:forks,favorites:favoriteForks,fetchStatus:fetchStatus};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchForks:function fetchForks(owner,repository,page){return dispatch(_fetchForks(owner,repository,page));},setRequestData:function setRequestData(owner,repository,page){return dispatch(_setRequestData(owner,repository,page));},addFavor:function addFavor(fullName){return dispatch(addFavorFork(fullName));},removeFavor:function removeFavor(fullName){return dispatch(removeFavorFork(fullName));}};};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(ResultsPage));","map":{"version":3,"sources":["/home/abbas/jsPractice/tasks/task-forks/github-forks-app/github-forks-app/src/pages/ResultsPage.js"],"names":["React","useState","useEffect","connect","fetchForks","setRequestData","withRouter","addFavorFork","removeFavorFork","Pagination","NotFoundPage","Wrapper","ForksList","Spinner","FavorModal","OpenModalBtn","ResultsPage","forks","fetchStatus","history","match","requestData","addFavor","removeFavor","favorites","modalInputValue","setModalInputValue","modalInputShow","setModalInputShow","modalInputInvalid","setModalInputInvalid","params","owner","repName","number","inputValidator","RegExp","changePage","n","push","Number","onModalInputChange","e","value","target","test","onAddFavorClick","onRemoveFavorClick","onShowModalClick","storingData","JSON","stringify","localStorage","setItem","error","bind","loading","length","mapStateToProps","favoriteForks","mapDispatchToProps","dispatch","repository","page","fullName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchForks } from '../actionCreators/forks';\nimport { setRequestData } from '../actionCreators/requestData';\nimport { withRouter } from 'react-router-dom';\nimport { addFavorFork, removeFavorFork } from '../actionCreators/favoritForks';\n\nimport Pagination from '../components/Pagination';\nimport NotFoundPage from './NotFoundPage';\nimport Wrapper from '../components/Wrapper';\nimport ForksList from '../components/ForksList';\nimport Spinner from '../components/Spinner';\nimport FavorModal from '../components/FavorModal';\nimport OpenModalBtn from '../components/OpenModalBtn';\n\nconst ResultsPage = ({\n    forks,\n    fetchStatus,\n    fetchForks,\n    setRequestData,\n    history,\n    match,\n    requestData,\n    addFavor,\n    removeFavor,\n    favorites\n}) => {\n    const [modalInputValue, setModalInputValue] = useState('');\n    const [modalInputShow, setModalInputShow] = useState(false);\n    const [modalInputInvalid, setModalInputInvalid] = useState(false);\n    const { owner, repName, number } = match.params;\n    const inputValidator = new RegExp(/^([a-z0-9]|[a-z0-9](-(?!-)|[a-z0-9]){0,37}[a-z0-9])\\/[a-z0-9-]{1,39}$/i);\n\n    const changePage = (n) => {\n        history.push(`/search/${owner}/${repName}/${Number(number) + n}`);\n        setRequestData( owner, repName, number + n );\n    };\n\n    const onModalInputChange = e => {\n        const { value } = e.target;\n        if (modalInputInvalid) setModalInputInvalid(!inputValidator.test(value));\n        setModalInputValue(value);\n    };\n\n    const onAddFavorClick = (value) => {\n        if (!inputValidator.test(value)) {\n            setModalInputInvalid(true);\n            return;\n        };\n        addFavor(value);\n        setModalInputValue('');\n        setModalInputShow(false);\n    };\n\n    const onRemoveFavorClick = value => {\n        if (!inputValidator.test(value)) {\n            setModalInputInvalid(true);\n            return;\n        };\n        removeFavor(value);\n        setModalInputValue('');\n        setModalInputShow(false);\n    }\n\n    const onShowModalClick = () => {\n        setModalInputShow(!modalInputShow);\n    };\n\n    useEffect(()=> {\n        fetchForks(owner, repName, number);\n    }, [requestData]);\n\n    useEffect(() => {\n        const storingData = JSON.stringify(favorites);\n        localStorage.setItem('favorites', storingData);\n    }, [favorites])\n\n    if (fetchStatus.error) return <NotFoundPage value={`${owner}/${repName}`} />\n\n    return (\n        <div>\n            {modalInputShow ?\n            <FavorModal\n                inputValue={modalInputValue}\n                onInputChange={onModalInputChange}\n                invalidInput={modalInputInvalid}\n                onAddClick={onAddFavorClick.bind(this, modalInputValue)}\n                onRemoveClick={onRemoveFavorClick.bind(this, modalInputValue)}\n                onBackClick={onShowModalClick}\n            />\n            :\n            <></>}\n            <OpenModalBtn onBtnClick={onShowModalClick} />\n            <Wrapper>\n                {fetchStatus.loading ? <Spinner /> : <ForksList forks={forks} favorites={favorites} />}\n            </Wrapper>\n            <Pagination \n                onNextClick={changePage.bind(this, 1)}\n                onPrevClick={changePage.bind(this, -1)}\n                prevDisabled={Number(number) === 1}\n                nextDisabled={forks.length < 10}\n            />\n        </div>\n    );\n};\n\nconst mapStateToProps = ({requestData, forks, favoriteForks, fetchStatus}) => ({\n    requestData: requestData,\n    forks: forks,\n    favorites: favoriteForks,\n    fetchStatus: fetchStatus\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchForks: (owner, repository, page) => dispatch(fetchForks(owner, repository, page)),\n    setRequestData: (owner, repository, page) => dispatch(setRequestData(owner, repository, page)),\n    addFavor: fullName => dispatch(addFavorFork(fullName)),\n    removeFavor: fullName => dispatch(removeFavorFork(fullName))\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ResultsPage));"]},"metadata":{},"sourceType":"module"}